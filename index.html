<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>PC Monitor</title>

<style>
body {
  font-family: Arial;
  text-align: center;
  margin-top: 50px;
  background: #111;
  color: white;
}
button {
  font-size: 22px;
  padding: 20px 35px;
  border-radius: 15px;
  border: none;
  margin: 15px;
  width: 260px;
}
#status {
  font-size: 18px;
  margin-top: 15px;
}
</style>
</head>

<body>

<h1>PC Monitor</h1>

<button id="toggleBtn" disabled>Loading...</button>
<br>
<button onclick="openEdit()">Edit Toggle</button>

<div id="status"></div>

<script>
const RAW_URL =
"https://gist.githubusercontent.com/masterbonger/45333d75201c3e985d109e345878f94b/raw/pc_monitor.txt";

const EDIT_URL =
"https://gist.github.com/masterbonger/45333d75201c3e985d109e345878f94b";

async function fetchState() {
  try {
    const res = await fetch(RAW_URL + "?t=" + Date.now());
    const state = (await res.text()).trim();

    const btn = document.getElementById("toggleBtn");
    const status = document.getElementById("status");

    if (state === "ON") {
      btn.innerText = "Monitoring: ON";
      btn.style.background = "green";
      status.innerText = "✅ Monitoring is ACTIVE";
    } else {
      btn.innerText = "Monitoring: OFF";
      btn.style.background = "red";
      status.innerText = "⏸ Monitoring is PAUSED";
    }

    btn.disabled = false;
  } catch {
    document.getElementById("status").innerText =
      "❌ Failed to fetch state";
  }
}

function openEdit() {
  window.open(EDIT_URL, "_blank");
}

fetchState();
setInterval(fetchState, 5000);
</script>

</body>
</html>
